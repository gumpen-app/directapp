# DirectApp - Environment Configuration (Development)
# Copy this file to .env and fill in the values
# DO NOT commit .env to git - it contains secrets!

# ========================================
# AUTOBASE POSTGRESQL CLUSTER
# ========================================
# Autobase is a Dokploy service on Hetzner VPS (157.180.125.91)
# Service name: autobase
# Primary: 10.0.1.6:6432 (internal IP in dokploy-network)
# Replica: 10.0.1.7:6432 (internal IP, available for read scaling)
#
# FOR LOCAL DEVELOPMENT:
# Option 1 (RECOMMENDED): SSH Tunnel to Hetzner VPS
#   ssh -L 5432:10.0.1.6:6432 root@157.180.125.91 -N &
#   Then use: DB_HOST=localhost, DB_PORT=5432
#
# Option 2: Direct connection (if Autobase exposed externally)
#   DB_HOST=157.180.125.91, DB_PORT=6432 (requires Traefik TCP routing)

DB_HOST=localhost
DB_PORT=5432
DB_DATABASE=directapp_dev
DB_USER=postgres
DB_PASSWORD=v5Kry76iPdEFUXOfxUlnswH77m68fAvI

# ========================================
# DIRECTUS SECURITY KEYS
# ========================================
# Generate new keys for production:
#   openssl rand -base64 32  # KEY
#   openssl rand -base64 64  # SECRET

DIRECTUS_KEY=dev-key-replace-in-prod-with-random-32-chars
DIRECTUS_SECRET=dev-secret-replace-in-prod-with-random-64-chars

# ========================================
# DIRECTUS ADMIN ACCOUNT
# ========================================
# Used only on first startup to bootstrap admin user
# Can be changed later in Directus UI

ADMIN_EMAIL=admin@dev.local
ADMIN_PASSWORD=admin

# ========================================
# APPLICATION URL
# ========================================

PUBLIC_URL=http://localhost:8055

# ========================================
# EXTERNAL API TOKENS
# ========================================

# Norwegian Vehicle Registry API (Statens Vegvesen)
# Get token from: https://www.vegvesen.no/
STATENS_VEGVESEN_TOKEN=your-token-here

# ========================================
# OPTIONAL: STORAGE (S3-compatible)
# ========================================
# For local dev, files are stored in ./uploads/
# For production, configure S3, MinIO, or Cloudflare R2

# S3_ACCESS_KEY=
# S3_SECRET_KEY=
# S3_BUCKET=
# S3_REGION=eu-north-1

# ========================================
# OPTIONAL: EMAIL (Resend)
# ========================================
# For local dev, emails are logged to console
# For production, configure Resend or SMTP

# RESEND_API_KEY=
# EMAIL_FROM=DirectApp <noreply@yourdomain.com>

# ========================================
# OPTIONAL: MONITORING (Sentry)
# ========================================

# SENTRY_DSN=

# ========================================
# NOTES
# ========================================
#
# First-time setup:
# 1. Create database on Autobase cluster:
#    psql -h 10.0.1.6 -p 6432 -U postgres -c "CREATE DATABASE directapp_dev;"
#
# 2. Copy this file to .env:
#    cp .env.example .env
#
# 3. Start services:
#    docker compose -f docker-compose.dev.yml up
#
# 4. Access Directus:
#    http://localhost:8055
#    Login: admin@dev.local / admin
#
# Stopping all services:
#    docker compose -f docker-compose.dev.yml down
#
# Removing data (DESTRUCTIVE - will delete database data):
#    docker compose -f docker-compose.dev.yml down -v
