# DirectApp - Staging Environment Configuration
# This file is used as a template for Dokploy deployment
# Copy values to Dokploy UI environment variables section

# ========================================
# AUTOBASE POSTGRESQL CLUSTER
# ========================================
# Autobase is a Dokploy service on Hetzner VPS (157.180.125.91)
# Service name: autobase
# Primary: 10.0.1.6:6432 (internal IP in dokploy-network)
# Replica: 10.0.1.7:6432 (internal IP, available for read scaling)
#
# For staging: Use internal IPs in dokploy-network

DB_HOST=10.0.1.6
DB_PORT=6432
DB_DATABASE=directapp_staging
DB_USER=postgres
DB_PASSWORD=v5Kry76iPdEFUXOfxUlnswH77m68fAvI

# ========================================
# DIRECTUS SECURITY KEYS
# ========================================
# Generate new keys for staging (different from dev and production):
#   openssl rand -base64 32  # KEY
#   openssl rand -base64 64  # SECRET
#
# IMPORTANT: Use different keys for each environment!

DIRECTUS_KEY=<generate-with-openssl-rand-base64-32>
DIRECTUS_SECRET=<generate-with-openssl-rand-base64-64>

# ========================================
# DIRECTUS ADMIN ACCOUNT
# ========================================
# Used only on first startup to bootstrap admin user
# IMPORTANT: Remove these variables after first deployment!

ADMIN_EMAIL=admin@staging-gapp.coms.no
ADMIN_PASSWORD=<set-strong-password-here>

# ========================================
# APPLICATION URL
# ========================================

PUBLIC_URL=https://staging-gapp.coms.no
CORS_ORIGIN=https://staging-gapp.coms.no
COOKIE_DOMAIN=.coms.no

# ========================================
# EMAIL (Resend)
# ========================================

EMAIL_FROM=DirectApp Staging <noreply@coms.no>
RESEND_API_KEY=<your-resend-api-key>

# ========================================
# STORAGE (S3-compatible)
# ========================================
# Choose one: AWS S3, Cloudflare R2, or MinIO

# Option 1: AWS S3
STORAGE_LOCATIONS=s3
S3_ACCESS_KEY=<your-s3-access-key>
S3_SECRET_KEY=<your-s3-secret-key>
S3_BUCKET=directapp-staging
S3_REGION=eu-north-1

# Option 2: Cloudflare R2
# STORAGE_LOCATIONS=s3
# S3_ENDPOINT=https://<account-id>.r2.cloudflarestorage.com
# S3_ACCESS_KEY=<r2-access-key>
# S3_SECRET_KEY=<r2-secret-key>
# S3_BUCKET=directapp-staging
# S3_REGION=auto

# ========================================
# EXTERNAL API TOKENS
# ========================================

# Norwegian Vehicle Registry API (Statens Vegvesen)
# Get token from: https://www.vegvesen.no/
STATENS_VEGVESEN_TOKEN=<your-staging-token>

# ========================================
# MONITORING (Optional but recommended)
# ========================================

# Sentry for error tracking
SENTRY_DSN=<your-staging-sentry-dsn>

# ========================================
# DEPLOYMENT NOTES
# ========================================
#
# Dokploy Deployment Steps:
# 1. Create service in Dokploy: directapp-staging
# 2. Upload docker-compose.staging.yml
# 3. Copy these environment variables to Dokploy UI
# 4. Deploy service
# 5. Verify health: https://staging-gapp.coms.no/server/health
# 6. Log in and change admin password immediately
# 7. Remove ADMIN_EMAIL and ADMIN_PASSWORD from Dokploy
# 8. Redeploy service
#
# See DOKPLOY_DEPLOYMENT_GUIDE.md for complete deployment instructions
